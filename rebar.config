%% -*- mode: erlang -*-
{erl_opts, [
    debug_info,
    warnings_as_errors,
    {platform_define, "^[0-9]+", namespaced_types}
]}.

{deps, [
    {hamcrest, ".*", {git, "https://github.com/basho/hamcrest-erlang.git", {tag, "0.2.0-basho"}}}
]}.

{xref_checks, [
    undefined_function_calls,
    undefined_functions,
    deprecated_function_calls,
    deprecated_functions,
    locals_not_used
]}.

{eunit_opts, [verbose]}.

{plugins, [
    {rebar3_gpb_plugin, "1.3.3"}
]}.

{provider_hooks, [
    {pre, [
        {compile, {protobuf, compile}},
        {clean, {protobuf, clean}}
    ]}
]}.

%% Fixes attempted removal of riak_pb directory by rebar_escripter
{escript_name, "doesnothavescript"}.

{edoc_opts, [{preprocess, true}]}.

{gpb_opts, [{i, "proto"},
            {module_name_suffix, "_pb"},
            {o_erl, "src"},
            {o_hrl, "include"},
            {defs_as_proplists, true},
            {msg_name_to_lower, true},
            type_specs]}.
